!function(e){var t={};function o(n){if(t[n])return t[n].exports;var c=t[n]={i:n,l:!1,exports:{}};return e[n].call(c.exports,c,c.exports,o),c.l=!0,c.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)o.d(n,c,function(t){return e[t]}.bind(null,c));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=100)}({100:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(41);function c(){document.body.innerHTML+='\n        <div id="fixed_Layer">\n            <span id="layer-link" title="보고 있는 웹툰을 탭에서 엽니다."><svg id="arrow" width="40" height="40" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">\n                    <polyline fill="none" stroke="#000"\n                        stroke-width="1.03" points="13 16 7 10 13 4" /></svg> </span></div>',document.getElementById("layer-link").addEventListener("click",function(e){whale.runtime.sendMessage(whale.runtime.id,{command:"openTab"},e=>{window.close()})})}whale.storage.sync.get("option",({option:e})=>{c(),e=JSON.parse(e);const t=new URL(location.href),o=t.searchParams.get("titleId");o&&(t.pathname.indexOf("detail.nhn")>-1?(document.querySelectorAll("img[data-src]").forEach(e=>e.setAttribute("src",e.getAttribute("data-src"))),whale.storage[e._storeLocation].get(["scrolls"],({scrolls:c="{}"})=>{const l=t.searchParams.get("no"),r=JSON.parse(c);r[o]&&r[o][l]&&n.setScroll(null,r[o][l],!0,!1),e._saveScroll&&n.checkScroll(null,!0),e._hiddenComment&&n.hiddenComment(null,!0),e._autoNext&&n.autoNext(null,!0)})):t.pathname.indexOf("list.nhn")>-1&&e._showHistory&&whale.storage[e._storeLocation].get(["visits"],({visits:t="{}"})=>{n.displayHistory(null,o,JSON.parse(t),e._showHistory)}))})},41:function(module,exports,__webpack_require__){"use strict";function hiddenComment(tabId,isMobile){const code=`document.getElementById("${isMobile?"cbox_module":"commentIframe"}").style.display = "none"`;tabId?whale.tabs.executeScript(tabId,{code:code}):eval(code)}function checkScroll(tabId,isMobile){const code=isMobile?`\n  var checkPercent;\n  function checkSc( event ) {\n    window.clearTimeout( checkPercent );\n    checkPercent = setTimeout(function() {\n    whale.runtime.sendMessage("${whale.runtime.id}", {scroll : document.documentElement.scrollTop / document.querySelector("#toonLayer>ul").scrollHeight })\n  }, 100)\n}\nwindow.addEventListener('scroll',checkSc, false);`:`\nvar checkPercent;\nfunction checkSc( event ) {\n    window.clearTimeout( checkPercent );\n    checkPercent = setTimeout(function() {\nwhale.runtime.sendMessage('${whale.runtime.id}', {scroll : (document.documentElement.scrollTop - document.querySelector(".wt_viewer").childNodes[1].offsetTop) / document.querySelector(".wt_viewer").scrollHeight })\n}, 100);}\nwindow.addEventListener('scroll',checkSc, false);`;tabId?whale.tabs.executeScript(tabId,{code:code}):eval(code)}function setScroll(tabId,scroll,isMobile,scrollAlert){const code=isMobile?`setTimeout(()=>{document.documentElement.scrollTop = document.querySelector("#toonLayer>ul").scrollHeight * ${scroll/100}}, 1000)`:scrollAlert?`if (confirm("[webtoon extension] 이전에 본 기록이 남아있습니다. (${scroll}%)\\n이어보시겠습니까?"));\n    document.documentElement.scrollTop = document.querySelector(".wt_viewer").childNodes[1].offsetTop + document.querySelector(".wt_viewer").scrollHeight * ${scroll/100}`:`document.documentElement.scrollTop = document.querySelector(".wt_viewer").childNodes[1].offsetTop + document.querySelector(".wt_viewer").scrollHeight * ${scroll/100}`;tabId?whale.tabs.executeScript(tabId,{code:code}):eval(code)}function autoNext(tabId,isAuto){const code=isAuto?'var wu = new URL(window.location.href);\n  console.log("AutoNext");\n  wu.searchParams.set("no", wu.searchParams.get("no")*1+1)\n  var isScrolling;\n  function checkScrolls( event ) {\n      window.clearTimeout( isScrolling );\n      isScrolling = setTimeout(function() {\n          if (document.documentElement.scrollHeight-document.documentElement.scrollTop<1500)\n               window.location.href = wu.href;\n      }, 500);\n\n  }\n  window.addEventListener(\'scroll\',checkScrolls, false);\n  ':"\n  if (window[\"checkScrolls\"])\n  window.removeEventListener('scroll', checkScrolls)";tabId?whale.tabs.executeScript(tabId,{code:code}):eval(code)}function displayHistory(tabId,webtoonId,visits,showHistory){visits[webtoonId]&&showHistory&&Object.keys(visits[webtoonId]).forEach(key=>{const code=`var wlog = document.querySelector("a[href*='detail.nhn?titleId=${webtoonId}&no=${key}']");\n      if (wlog){\n        wlog=wlog.parentElement.parentElement;\n        wlog.style.background="lightgray";\n        wlog.title="${new Date(1e3*visits[webtoonId][key]).toLocaleString()+"에 봄"}"\n    }`;tabId?whale.tabs.executeScript(tabId,{code:code}):eval(code)})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.hiddenComment=hiddenComment,exports.checkScroll=checkScroll,exports.setScroll=setScroll,exports.autoNext=autoNext,exports.displayHistory=displayHistory}});